import std::io.
import std::string.

rule main() -> i64:
  set dummy = std::io::print("Enter first number: ").
  set left_number_text: string = std::io::read_line().
  put dummy = std::io::print("Enter operator (+, -, *, %): ").
  set op: string = std::io::read_line().
  put dummy = std::io::print("Enter second number: ").
  set right_number_text: string = std::io::read_line().

  set left: i64 = std::string::to_i64(left_number_text).
  set right: i64 = std::string::to_i64(right_number_text).
  set result: i64 = 0.

  when std::string::eq(op, "+"):
    put result = left + right.
  otherwise:
    when std::string::eq(op, "-"):
      put result = left - right.
    otherwise:
      when std::string::eq(op, "*"):
        put result = left * right.
      otherwise:
        when std::string::eq(op, "%"):
          put result = left % right.
        otherwise:
          yield std::io::print("unknown operator\n").
        end
      end
    end
  end

  set result_text: string = std::string::from_i64(result).
  set message: string = std::string::concat("Result: ", result_text).
  put message = std::string::concat(message, "\n").
  yield std::io::print(message).
end
